<%= title @member.name %>

<div class="member-show-container">
    <div class="profile-area">
        <section class="member-info">
            <% if member_signed_in? && current_member.id == @member.id %>
                <%= link_to edit_member_path do %>
                    <%= image_tag 'user_edit.png', id: 'user-edit' %>
                <% end %>
            
            <% end %>
            <%= image_tag @member.get_profile_image %>
            <p class="name"><%= @member.name %></p>
            <p class="introduction"><%= @member.intro %></p>
        </section>
        
        <section class="learning-skills">
            <p class="title">Learning Skills</p>
            <% languageList = @member.calculate_selected_attr(@member.learning_programming_languages, "PROGRAMMING_LANGUAGES") %>
            <% frameworkList = @member.calculate_selected_attr(@member.learning_frameworks, "FRAMEWORKS") %>
            <% libraryList = @member.calculate_selected_attr(@member.learning_libraries, "LIBRARIES") %>
            <% game_engineList = @member.calculate_selected_attr(@member.learning_game_engines, "GAME_ENGINES") %>
            <% graphics_3dList = @member.calculate_selected_attr(@member.learning_graphics_3D, "GRAPHICS_3D") %>
            <% skill2dList = Array[languageList, frameworkList, libraryList, game_engineList, graphics_3dList] %>
            
            <% if skill2dList.all?(&:empty?) %>
                <h5>To be Decided‚Ä¶ü§î</h5>
            <% else %>
                <% skill2dList.each_with_index do |attrList, index| %>
                    <% if attrList.empty? == false %>
                        <div class="skill-card">
                            <h4><%= Member::ATTR_DICT[index] %></h4>
                            <section class="skills">
                                <% attrList.each do |skill| %>
                                    <%= skills_logo_select(skill) %>
                                <% end %>
                            </section>
                        </div>
                    <% end %>
                <% end %>
            <% end %>
        </section>
    </div>
    
    <div class="my-article-admin-area">
        <div class="published">
            <h1>Activities</h1>
            <section class="activities">
                <% if @activities_published.any? %>
                    <% @activities_published.reverse_each do |activity| %>
                        <div class="activity-card" data-controller="top">
                            <section class="img">
                                <%= responsive_activity_image_tag activity.get_activity_image, class: 'activity-image' %>
                            </section>
                            <section class="article">
                                <%= link_to activity.title, activity_path(activity.id), class: 'title' %>
                                <p><%= activity.created_at.strftime('%Y/%m/%d') %></p>
                                <% if member_signed_in? && current_member.id == @member.id %>
                                    <%= link_to 'Edit', edit_activity_path(activity.id), class: "edit-activity-button" %>
                                <% end %>
                            </section>
                        </div>
                    <% end %>
                <% else %>
                    <p class="comment-1">Typing in Progress‚Ä¶</p>
                    <p class="typing-icon">üßëüèª‚Äçüíª</p>
                <% end %>
            </section>
        </div>
        
        <% if member_signed_in? && current_member.id == @member.id %>
            <div class="private">
                <h1>Drafts</h1>
                <section class="drafts">
                    <% if @activities_draft.any? %>
                        <% @activities_draft.reverse_each do |activity| %>
                            <div class="draft-card" data-controller="top">
                                <section class="img">
                                    <%= responsive_activity_image_tag activity.get_activity_image, class: 'draft-image' %>
                                </section>
                                <section class="article">
                                    <%= link_to activity.title, activity_path(activity.id), class: 'title' %>
                                    <p><%= activity.created_at.strftime('%Y/%m/%d') %></p>
                                    <%= link_to 'Edit', edit_activity_path(activity.id), class: "edit-activity-button" %>
                                    <%= button_to 'Delete', activity_path(activity.id), class: "delete-button", method: :delete, form: { data: { turbo_confirm: 'Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü' } } %>
                                </section>
                            </div>
                        <% end %>
                    <% else %>
                        <p class="comment-1">Let's Try to Write an Your Article‚úèÔ∏è</p>
                        <p class="typing-icon">üßëüèª‚Äçüíª</p>
                    <% end %>
                </section>
            </div>
        <% end %>
    </div>
</div>


<div class="card">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item me-2">
                <%= link_to '„Éó„É≠„Éï„Ç°„Ç§„É´', member_path(@member), class: 'btn btn-outline-dark profile-button-dark' %>
            </li>
            <div class="d-flex">
                <% if member_signed_in? && current_member.id == @member.id %>
                    <li class="nav-item me-2">
                        <%= link_to 'Á∑®ÈõÜ', edit_member_path, class: 'btn btn-outline-info' %>
                    </li>
                    <% unless current_member.user? %>
                        <li class="nav-item me-2">
                            <%= link_to 'Admin', site_admins_index_path, class: 'btn btn-outline-warning' %>
                        </li>
                    <% end %>
                    <li class="nav-item me-2">
                        <%= button_to '„É≠„Ç∞„Ç¢„Ç¶„Éà', destroy_member_session_path, method: :delete, class: 'btn btn-outline-danger' %>
                    </li>
                <% end %>
            </div>
        </ul>
    </div>
    <div class="text-center" style="width: 100%;">
        <%= image_tag @member.get_profile_image, class: "profile-image", style: 'max-width: 200px; max-height: 150px;' %>
    </div>
    <div class="card-body">
        <div class="text-center mb-4">
            <h1 class="card-title"><%= @member.name %></h1>
            <p class="card-text"><%= @member.intro %></p>
        </div>
        <div class="flex-container">
            <div class="flex-column">
                <div class="content">
                    <b><h2>„É¶„Éº„Ç∂„ÉºË©≥Á¥∞</h2></b>
                </div>
                <div class="content">
                    <h5>Â≠¶Âπ¥Ôºö<%= grade_translation(@member.grade) %></h5>
                </div>
                <div class="content">
                    <h5>ÂçíÂπ¥Ôºö<%= @member.graduation_year %>Âçí</h5>
                </div>
                <div class="content">
                    <% if member_signed_in? %>
                        <h5>„É°„Éº„É´Ôºö<%= @member.email %></h5>
                    <% end %>
                </div>
            </div>
            <div class="flex-column">
                <div class="content">
                    <b><h2>Â≠¶Áßë„Éª„Ç≥„Éº„Çπ</h2></b>
                </div>
                <div class="content">
                    <h5>Â≠¶ÁßëÔºö <%= department_translation(@member.department) %></h5>
                </div>
                <div class="content">
                    <h5>„Ç≥„Éº„ÇπÔºö <%= course_translation(@member.course) %></h5>
                </div>
            </div>
            <div class="skills-field">
                <div class="content">
                    <b><h2>Â≠¶Áøí‰∏≠„Çπ„Ç≠„É´</h2></b>
                </div>
                <div class="content">
                    <% languageList = @member.calculate_selected_attr(@member.learning_programming_languages, "PROGRAMMING_LANGUAGES") %>
                    <% frameworkList = @member.calculate_selected_attr(@member.learning_frameworks, "FRAMEWORKS") %>
                    <% libraryList = @member.calculate_selected_attr(@member.learning_libraries, "LIBRARIES") %>
                    <% game_engineList = @member.calculate_selected_attr(@member.learning_game_engines, "GAME_ENGINES") %>
                    <% graphics_3dList = @member.calculate_selected_attr(@member.learning_graphics_3D, "GRAPHICS_3D") %>
                    <% skill2dList = Array[languageList, frameworkList, libraryList, game_engineList, graphics_3dList] %>
                    
                    <% if skill2dList.all?(&:empty?) %>
                        <h5>Â≠¶„Çì„Åß„Çã„Çπ„Ç≠„É´„Å™„Åó</h5>
                    <% else %>
                        <% skill2dList.each do |attrList| %>
                            <div class="bordered-div">
                                <div class="flex-column learning-field">
                                    <% index = skill2dList.find_index(attrList) %>
                                    <% if attrList.empty? == false %>
                                        <h4><%= Member::ATTR_DICT[index] %></h4>
                                        <% attrList.each do |skill| %>
                                            <h5><%= skill %></h5>
                                        <% end %>
                                    <% end %>
                                </div>
                            </div>
                        <% end %>
                    <% end %>
                </div>
            </div>
        </div>
        
        
        <% if member_signed_in? && current_member.id == @member.id %>
            
            <div class="d-flex flex-column mb-2">
                <b><h2 class="text-center m-4">ÂÖ¨ÈñãË®ò‰∫ã‰∏ÄË¶ß</h2></b>
                <% if @activities_published.any? %>
                    <div class="horizontal-scroll-container">
                        <% @activities_published.reverse_each do |activity| %>
                            <div class="card mb-2" style="width: 18rem;">
                                <%= image_tag activity.get_activity_image, class: 'img-fluid card-img-top' %>
                                <div class="card-body">
                                    <h5 class="card-title"><%= link_to activity.title, activity_path(activity.id), class: 'link-offset-2 link-underline link-underline-opacity-0' %></h5>
                                    <h6><%= link_to activity.member.name, member_path(activity.member_id), class: 'link-offset-2 link-underline link-underline-opacity-0' %></h6>
                                    <%= link_to 'Á∑®ÈõÜ', edit_activity_path(activity.id), class: 'btn btn-primary' %>
                                    <p class="card-text">
                                        <small class="text-body-secondary"><%= activity.created_at.strftime('%Y/%m/%d') %></small>
                                    </p>
                                </div>
                            </div>
                        <% end %>
                    </div>
                <% else %>
                    <h5>„Éº„ÄÄÂÖ¨ÈñãË®ò‰∫ã„Å™„Åó</h5>
                <% end %>
            </div>
            
            <div class="d-flex flex-column mb-2">
                <b><h2 class="text-center m-4">‰∏ãÊõ∏„Åç‰∏ÄË¶ß</h2></b>
                <% if @activities_draft.any? %>
                    <div class="horizontal-scroll-container">
                        <% @activities_draft.reverse_each do |activity| %>
                            <div class="card mb-2" style="width: 18rem;">
                                <%= image_tag activity.get_activity_image, class: 'img-fluid card-img-top' %>
                                <div class="card-body">
                                    <h5 class="card-title"><%= link_to activity.title, activity_path(activity.id), class: 'link-offset-2 link-underline link-underline-opacity-0' %></h5>
                                    <h6><%= link_to activity.member.name, member_path(activity.member_id), class: 'link-offset-2 link-underline link-underline-opacity-0' %></h6>
                                    <%= link_to 'Á∑®ÈõÜ', edit_activity_path(activity.id), class: 'btn btn-primary' %>
                                    <p class="card-text">
                                        <small class="text-body-secondary"><%= activity.created_at.strftime('%Y/%m/%d') %></small>
                                    </p>
                                </div>
                            </div>
                        <% end %>
                    </div>
                <% else %>
                    <h5>„Éº„ÄÄ‰∏ãÊõ∏„Åç„Å™„Åó</h5>
                <% end %>
            </div>
        
        <% else %>
            
            <div class="d-flex flex-column mb-2">
                <b><h2 class="text-center m-4">Ë®ò‰∫ã‰∏ÄË¶ß</h2></b>
                <% if @activities_published.any? %>
                    <div class="horizontal-scroll-container">
                        <% @activities_published.reverse_each do |activity| %>
                            <div class="card mb-2" style="width: 18rem;">
                                <%= image_tag activity.get_activity_image, class: 'img-fluid card-img-top' %>
                                <div class="card-body">
                                    <h5 class="card-title"><%= link_to activity.title, activity_path(activity.id), class: 'link-offset-2 link-underline link-underline-opacity-0' %></h5>
                                    <h6><%= link_to activity.member.name, member_path(activity.member_id), class: 'link-offset-2 link-underline link-underline-opacity-0' %></h6>
                                    <p class="card-text">
                                        <small class="text-body-secondary"><%= activity.created_at.strftime('%Y/%m/%d') %></small>
                                    </p>
                                </div>
                            </div>
                        <% end %>
                    </div>
                <% else %>
                    <h5>„Éº„ÄÄË®ò‰∫ã„Å™„Åó</h5>
                <% end %>
            </div>
        
        <% end %>
        
        <div class="btn-group">
            <%= link_to '„Éà„ÉÉ„Éó„Éö„Éº„Ç∏', root_path, class: "btn btn-success" %>
            <%= link_to 'Êàª„Çã', :back, class: "btn btn-danger" %>
        </div>
    </div>
</div>